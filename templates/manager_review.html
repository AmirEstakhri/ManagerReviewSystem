<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manager Review</title>
    <script>
        function showVerifiedPopup(submissionId) {
            alert('Verified');
            document.getElementById(`status-${submissionId}`).innerText = 'Verified';
        }
    </script>
</head>
<body>
    <h1>Manager Review</h1>
    <form method="post">
        <label for="priority">Filter by Priority:</label>
        <select id="priority" name="priority">
            <option value="">All</option>
            <option value="Low" {% if selected_priority == 'Low' %}selected{% endif %}>Low</option>
            <option value="Medium" {% if selected_priority == 'Medium' %}selected{% endif %}>Medium</option>
            <option value="High" {% if selected_priority == 'High' %}selected{% endif %}>High</option>
        </select>
        <input type="submit" value="Filter">
    </form>

    <ul>
        {% for submission in submissions %}
            <li>
                <strong>Entry {{ loop.index }}:</strong> 
                Name: {{ submission.name }} | 
                Status: <span id="status-{{ submission.id }}">{{ submission.status }}</span> | 
                Priority: {{ submission.priority }}
                
                <!-- View button -->
                <a href="{{ url_for('submitted_forms') }}#submission-{{ submission.id }}"><button>View</button></a>
                
                <!-- Verify button with pop-up functionality -->
                <form action="{{ url_for('verify_submission', submission_id=submission.id) }}" method="post" style="display:inline;" 
                      onsubmit="showVerifiedPopup({{ submission.id }})">
                    <input type="submit" value="Verify">
                </form>
                
                <!-- Edit button -->
                <a href="{{ url_for('edit_submission', submission_id=submission.id) }}"><button>Edit</button></a>
            </li>
        {% endfor %}
    </ul>

    <a href="/">Go Home</a>
</body>
</html>
